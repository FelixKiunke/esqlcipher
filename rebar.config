{require_min_otp_vsn, "R15"}.
{port_env, [
    %% Default darwin ldflags causes loading of system sqlite. Removed -bundle flag. 
    {"darwin", "DRV_LDFLAGS", 
        "-flat_namespace -undefined suppress $ERL_LDFLAGS"},

    {"solaris", "CFLAGS",
        "-std=c99"},

    {"CFLAGS", "$CFLAGS -DSQLITE_DQS=0 -DSQLITE_HAS_CODEC -DSQLITE_DEFAULT_WAL_SYNCHRONOUS=1 -DSQLITE_LIKE_DOESNT_MATCH_BLOBS -DSQLITE_OMIT_DEPRECATED -DSQLITE_OMIT_SHARED_CACHE -DSQLITE_TEMPSTORE= -DSQLITE_THREADSAFE=1 -DSQLITE_USE_URI -DSQLITE_ENABLE_FTS4 -DSQLITE_ENABLE_FTS5 -DSQLITE_ENABLE_FTS3_PARENTHESIS -DSQLITE_ENABLE_JSON1"}
]}.
{port_specs, [
  {"priv/esqlcipher_nif.so", ["c_src/esqlcipher_nif.c", "c_src/queue.c", "c_src/sqlite3/sqlite3.c"]}
]}.

{plugins, [pc]}.

{provider_hooks,
     [{post,
       [{compile, {pc, compile}},
        {clean, {pc, clean}}]}]}.
